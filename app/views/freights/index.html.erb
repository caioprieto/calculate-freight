<div class="container mt-5 fixed-container">
  <div class="card shadow p-5 fixed-card">
    <%= form_with(url: calcular_frete_path, method: :post, local: true, class: "row g-3") do |form| %>
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h3 class="p-1">CALCULAR FRETE</h3>
        <button type="submit" class="btn btn-dark btn-lg">
          <i class="bi bi-calculator-fill"></i>
        </button>
      </div>

      <div class="col-md-12">
        <%= form.label :service_type_id, "Tipo de serviço", class: "form-label fw-light" %>
        <%= form.select :service_type_id, options_for_select([['PAC', 1], ['Sedex', 2], ['Outros', 3]], selected: params[:service_type_id]), {}, { class: "form-control form-control-sm select2", id: "service_type_select" } %>
      </div>

      <div class="col-md-12">
        <%= form.label :cep_destino, "CEP de Destino", class: "form-label fw-light" %>
        <%= form.text_field :cep_destino, class: "form-control form-control-sm", placeholder: "Digite o CEP", required: true, value: params[:cep_destino] %>
      </div>

      <div class="col-md-3">
        <%= form.label :weight, "Peso (kg)", class: "form-label fw-light" %>
        <%= form.number_field :weight, class: "form-control form-control-sm", required: true, value: params[:weight] %>
      </div>

      <div class="col-md-3">
        <%= form.label :length, "Comprimento (cm)", class: "form-label fw-light" %>
        <%= form.number_field :length, class: "form-control form-control-sm", required: true, value: params[:length] %>
      </div>

      <div class="col-md-3">
        <%= form.label :width, "Largura (cm)", class: "form-label fw-light" %>
        <%= form.number_field :width, class: "form-control form-control-sm", required: true, value: params[:width] %>
      </div>

      <div class="col-md-3">
        <%= form.label :height, "Altura (cm)", class: "form-label fw-light" %>
        <%= form.number_field :height, class: "form-control form-control-sm", required: true, value: params[:height] %>
      </div>
    <% end %>

    <br>

    <% if @frete_calculado.present? %>
      <div class="alert alert-warning mt-4">
        <p><strong>Serviço:</strong> <%= @frete_calculado["name"] %></p>
        <p><strong>Transportadora:</strong> <%= @frete_calculado["company"]["name"] %></p>
        <p><strong>Preço Final:</strong> <%= number_to_currency(@frete_calculado["custom_price"].to_f, unit: "R$") %></p>
        <p><strong>Prazo de Entrega:</strong> <%= @frete_calculado["delivery_time"] %> dias</p>
      </div>
    <% end %>
  </div>
</div>

<style>
.fixed-container {
  max-width: 800px; /* Define uma largura máxima */
}

.fixed-card {
  width: 100%; /* Ocupa toda a largura do container */
  min-height: 760px; /* Define uma altura mínima */
  max-height: 760px; /* Define uma altura máxima */
}

/* Exemplo de estilo customizado */
.select2-container .select2-selection--single {
  height: 40px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 16px;
}

.select2-container--bootstrap4 .select2-results__option {
  font-size: 16px;
  padding: 3px;
}

.select2-container--bootstrap4 .select2-results__option--highlighted {
  background-color: black;
  color: white;
}

</style>

<script>
  $(document).ready(function() {
    $('#service_type_select').select2({
      theme: 'bootstrap4', // Para usar o tema Bootstrap 4 (ou outro se necessário)
      placeholder: "Selecione o tipo de serviço", // Texto de exemplo quando nada é selecionado
      allowClear: true // Permite limpar a seleção
    });
  });
</script>