<div class="d-flex gap-2 mt-3 mb-3">
  <%# Voltar %>
  <a href="/admin/cursos" class="btn btn-secondary px-3 py-1" style="border-radius: 10px">
    <i class="bi bi-box-arrow-left fs-4 me-1"></i>
    <span style="position: relative; top: -4px; font-weight: 600">Voltar</span>
  </a>

  <%# Salvar %>
  <%= f.button type: "submit", class: "btn btn-success px-3 py-0", style: "border-radius: 10px" do %>
    <i class="bi bi-check-circle-fill fs-4 me-1"></i>
    <span style="position: relative; top: -4px; font-weight: 600">Salvar</span>
  <% end %>

  <%# Adicionar Módulo %>
  <button type="button" id="add-modulo" class="btn btn-primary px-3 py-0" style="border-radius: 10px">
    <i class="bi bi-plus-circle-fill fs-4 me-1"></i>
    <span style="position: relative; top: -4px; font-weight: 600">Adicionar Módulo</span>
  </button>

  <%# Escolher Capa %>
  <label class="btn btn-info px-3 py-0 text-white" style="border-radius: 10px;">
    <i style="position: relative; top: 4px;" class="bi bi-file-image-fill fs-4 me-1"></i>
    <span id="imagem_label_text" style="position: relative; top: 1px; font-weight: 600;">
      <%= @curso.imagem.attached? ? @curso.imagem.filename.to_s.truncate(25) : "Escolher Capa" %>
    </span>
    <%= f.file_field :imagem, style: "display: none;", id: "imagem_input" %>
  </label>

  <%# Remover capa %>
  <%= f.hidden_field :remove_imagem, id: "remove_imagem_field" %>
  <button type="button" class="btn btn-danger px-3 py-0" onclick="removerImagem()" style="border-radius: 10px;">
    <i class="bi bi-trash-fill fs-4 me-1"></i>
    <span style="position: relative; top: -3px; font-weight: 600;">
      Remover Capa
    </span>
  </button>
</div>

<script>
  function removerImagem() {
    document.getElementById('imagem_input').value = "";
    document.getElementById('remove_imagem_field').value = "1";
    document.getElementById('imagem_label_text').innerText = "Escolher Capa";
  }

  document.addEventListener("DOMContentLoaded", function () {
    const toggleModulos = document.getElementById('toggle_modulos');
    const toggleRedacoes = document.getElementById('toggle_redacoes');

    const containerModulos = document.getElementById('container_modulos');
    const containerRedacoes = document.getElementById('container_redacoes');
    const containerRedacoesEscolhidas = document.getElementById('container_redacoes_escolhidas');

    toggleRedacoes.addEventListener('change', function () {
      containerRedacoes.style.display = this.checked ? 'flex' : 'none';
      containerRedacoesEscolhidas.style.display = this.checked ? 'flex' : 'none';
    });

    window.addEventListener('DOMContentLoaded', function () {
      containerModulos.style.display = toggleModulos.checked ? 'block' : 'none';
    });

    toggleModulos.addEventListener('change', function () {
      containerModulos.style.display = this.checked ? 'block' : 'none';
    });

    window.addEventListener('DOMContentLoaded', function () {
      containerModulos.style.display = toggleModulos.checked ? 'block' : 'none';
    });

    document.getElementById('toggle_preview').addEventListener('change', function() {
      const previewContainer = document.getElementById('preview_container');
      if (this.checked) {
        previewContainer.style.display = 'block';
      } else {
        previewContainer.style.display = 'none';
      }
    });

    document.getElementById('toggle_fields').addEventListener('change', function() {
      const fieldsContainer = document.getElementById('form_container');

      if (this.checked) {
        fieldsContainer.style.display = 'block';
      } else {
        fieldsContainer.style.display = 'none';
      }
    });
  });
</script>
